# โก ูุฑุฌุน ุณุฑูุน: ุงูุญุฌู ูุงูุฃุฏุงุก

## ๐ ุงูุจูุงูุงุช ุงูููุชุฑุถุฉ
- ุงูุนูุงุฑุงุช: **3,000**
- ุงููุญุฏุงุช ููู ุนูุงุฑ: **30**
- ุฅุฌูุงูู ุงููุญุฏุงุช: **90,000**
- ุณุฌูุงุช ุงูุฅุชุงุญุฉ: **~450,000** (5 ุณุฌูุงุช/ูุญุฏุฉ)
- ููุงุนุฏ ุงูุชุณุนูุฑ: **~270,000** (30% ูู ุงููุญุฏุงุช)

---

## ๐พ ุญุฌู ุงูููุงุฑุณ

| ุงูุฌุฏูู | ุญุฌู ุงูููุงุฑุณ | ุงูุฃูููุฉ |
|--------|-------------|---------|
| Units | **156 MB** | โกโก |
| UnitAvailabilities | **253 MB** | โกโกโก (ุงูุฃูู) |
| PricingRules | **128 MB** | โกโก |
| Properties | **4.4 MB** | โก |
| ุฌุฏุงูู ุฃุฎุฑู | **39 MB** | โก |
| **ุงูุฅุฌูุงูู** | **~580 MB** | |

### ูุน ุงูุจูุงูุงุช
- ุงูุจูุงูุงุช: **~1.2 GB**
- ุงูููุงุฑุณ: **580 MB**
- **ุงููุฌููุน: ~1.8 GB**

---

## โฑ๏ธ ุงูุฃุฏุงุก ุงููุชููุน

### ุงูุจุญุซ ุงูุจุณูุท (ุจุฏูู ุชูุงุฑูุฎ)
```
ุงููุฏููุฉ + ุงูุณุนุฑ + ุงูุณุนุฉ
```
**ุงูุฒูู: 15-25 ms** โกโกโก

---

### ุงูุจุญุซ ุงููุงูู (ูุน ุชูุงุฑูุฎ)
```
ุงููุฏููุฉ + ุงูุณุนุฑ + ุงูุณุนุฉ + CheckIn/CheckOut
```
**ุงูุฒูู: 45-70 ms** โกโก

#### ุงูุชูุตูู:
| ุงูุนูููุฉ | ุงูุฒูู |
|---------|-------|
| ููุชุฑุฉ ุงููุฏููุฉ + ุงูุณุนุฑ + ุงูุณุนุฉ | 10 ms |
| ูุญุต ุงูุฅุชุงุญุฉ (UnitAvailabilities) | 15-25 ms |
| ุฌูุจ PricingRules | 10-15 ms |
| ุญุณุงุจ ุงูุณุนุฑ ุงูุฅุฌูุงูู | 5-10 ms |
| JOIN + ุงูุชุฑุชูุจ | 5-10 ms |

---

### ุงูุจุญุซ ุงูุฌุบุฑุงูู
```
ุงูุจุญุซ ุงููุงูู + RadiusKm
```
**ุงูุฒูู: 60-90 ms** โกโก

---

### ุงูุจุญุซ ุงููุตู
```
ุงูุจุญุซ ุงููุงูู + SearchText
```
**ุงูุฒูู: 70-100 ms** โก

---

## ๐ฏ ุงูููุงุฑูุฉ

| ุงูุณููุงุฑูู | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ | ุงูุชุญุณูู |
|----------|-------------|-------------|---------|
| ุญุฌู ุงูููุงุฑุณ ุงูุฒุงุฆุฏุฉ | 120 MB | 0 MB | โ 100% |
| ุนุฏุฏ ุงูููุงุฑุณ ุบูุฑ ุงููููุฏุฉ | 8 | 0 | โ 100% |
| ุฒูู ุงูุจุญุซ (ูุน ุชูุงุฑูุฎ) | 60-90 ms | 45-70 ms | โก 25% |
| ุฏูุฉ ุงูุฅุชุงุญุฉ | โ ุบูุฑ ูุถูููุฉ | โ 100% | โ |
| ุณุฑุนุฉ INSERT/UPDATE | ุนุงุฏู | ุฃุณุฑุน 15% | โก |

---

## ๐ง ุงูููุงุฑุณ ุงูุฑุฆูุณูุฉ

### โญ ุงูุฃูู ููุฃุฏุงุก

| ุงูููุฑุณ | ุงูุฌุฏูู | ุงูููุน | ุงููุงุฆุฏุฉ |
|--------|--------|------|---------|
| `IX_UnitAvailabilities_DateRange_GiST` | UnitAvailabilities | Range GiST | โกโกโก ูุดู ุงูุชุนุงุฑุถุงุช |
| `IX_UnitAvailabilities_Blocked` | UnitAvailabilities | Partial | โกโกโก WHERE Status != 'Available' |
| `IX_UnitAvailabilities_Covering` | UnitAvailabilities | Covering | โกโก ุชุฌูุจ ุงูุฑุฌูุน ููุฌุฏูู |
| `IX_PricingRules_DateRange_GiST` | PricingRules | Range GiST | โกโก ุญุณุงุจ ุงูุฃุณุนุงุฑ |
| `IX_Units_Composite_Main` | Units | Composite | โกโก PropertyId, UnitTypeId, Price, Capacity |

---

## ๐ ูุงุจููุฉ ุงูุชูุณุน

| ุนุฏุฏ ุงููุญุฏุงุช | ุญุฌู ุงูููุงุฑุณ | ุฒูู ุงูุจุญุซ | ุงูุญุงูุฉ |
|-------------|-------------|-----------|--------|
| 90,000 | 580 MB | 45-70 ms | โ ููุชุงุฒ |
| 200,000 | 1.3 GB | 60-90 ms | โ ุฌูุฏ ุฌุฏุงู |
| 500,000 | 3.2 GB | 80-120 ms | โ๏ธ ุฌูุฏ (ุตูุงูุฉ ุฏูุฑูุฉ) |
| 1,000,000 | 6.4 GB | 100-150 ms | โ๏ธ ููุจูู (Partitioning ูุทููุจ) |

---

## ๐งน ุงูุตูุงูุฉ

### ุฃุณุจูุนูุงู
```sql
VACUUM ANALYZE "UnitAvailabilities";
VACUUM ANALYZE "PricingRules";
```
**ุงูุฒูู: 30-60 ุซุงููุฉ**

### ุดูุฑูุงู
```sql
REINDEX TABLE "UnitAvailabilities";
DELETE FROM "UnitAvailabilities" 
WHERE "EndDate" < CURRENT_DATE - INTERVAL '6 months'
AND "Status" = 'Available';
```
**ุงูุฒูู: 2-5 ุฏูุงุฆู**

### ูู 3 ุฃุดูุฑ
```sql
VACUUM FULL "UnitAvailabilities";
```
**ุงูุฒูู: 5-15 ุฏูููุฉ**

---

## โ ุงูุฎูุงุตุฉ

### ุงูุฃุฏุงุก
- โก ุจุญุซ ุจุณูุท: **15-25 ms**
- โก ุจุญุซ ูุงูู: **45-70 ms**
- โก ุจุญุซ ูุชูุฏู: **70-100 ms**

### ุงูุญุฌู
- ๐พ ููุงุฑุณ: **580 MB**
- ๐พ ุจูุงูุงุช + ููุงุฑุณ: **1.8 GB**

### ุงูุฏูุฉ
- โ ุงูุฅุชุงุญุฉ: **100%** (ูู UnitAvailabilities)
- โ ุงูุชุณุนูุฑ: **100%** (ูู PricingRules)
- โ ูุง ุงุนุชูุงุฏ ุนูู IsAvailable: **0%**

---

**๐ ุฌุงูุฒ ููุฅูุชุงุฌ**
