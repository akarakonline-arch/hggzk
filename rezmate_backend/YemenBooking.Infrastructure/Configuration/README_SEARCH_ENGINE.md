# ๐ ุฏููู ุงูุชุญูู ุจูุญุฑู ุงูุจุญุซ ูุงูููุฑุณุฉ

## ๐ ุงููุญุฑูุงุช ุงููุชุงุญุฉ

### 1๏ธโฃ **Redis** - `UltraOptimizedSearchEngine`
- โ **ุงูุฃุฏุงุก**: ุณุฑุนุฉ ูุงุฆูุฉ ุฌุฏุงู (Lua Scripts + In-Memory)
- โ **ุงูููุฒุงุช**: ุฏุนู ูุงูู ูุฌููุน ุฃููุงุน ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ **ุงููุชุทูุจุงุช**: ูุญุชุงุฌ Redis Server ูุดุท
- ๐ฐ **ุงูุชูููุฉ**: ูุญุชุงุฌ ุณูุฑูุฑ ุฎุงุต ุฃู ุฎุฏูุฉ Redis ูุฏููุนุฉ

### 2๏ธโฃ **PostgreSQL** - `PostgresUnitSearchEngine`
- โ **ุงูููุซูููุฉ**: ูุนูู ูุจุงุดุฑุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ
- โ **ุงูููุฒุงุช**: ุฏุนู ูุงูู + ููุงุฑุณ ูุชูุฏูุฉ (GIN, GiST, Covering)
- โ **ุงููุชุทูุจุงุช**: ูุง ูุญุชุงุฌ ุฎุฏูุงุช ุฅุถุงููุฉ
- ๐ฐ **ุงูุชูููุฉ**: ูุฌุงูู (ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ููุท)

---

## โ๏ธ ุงูุชุญูู ุจูุญุฑู ุงูุจุญุซ

### ุงูุทุฑููุฉ 1: ูู `appsettings.json` (ููุตู ุจูุง โ)

```json
{
  "SearchEngine": {
    "Provider": "Postgres",     // ุฃู "Redis" ุฃู "Auto"
    "AutoFallback": true,        // ุงูุชุจุฏูู ุงูุชููุงุฆู ุฅุฐุง ูุดู Redis
    "EnableDetailedLogging": false
  }
}
```

#### ุงูุฎูุงุฑุงุช:

| ุงููููุฉ | ุงููุตู |
|--------|-------|
| `"Postgres"` | ุงุณุชุฎุฏุงู PostgreSQL ุฏุงุฆูุงู (ููุงุณุจ ููุณูุฑูุฑุงุช ุงููุดุชุฑูุฉ) |
| `"Redis"` | ุงุณุชุฎุฏุงู Redis ุฏุงุฆูุงู (ููุงุณุจ ููุณูุฑูุฑุงุช ุงูุฎุงุตุฉ) |
| `"Auto"` | ุงุฎุชูุงุฑ ุชููุงุฆู: Redis ุฅู ููุฌุฏุ ูุฅูุง PostgreSQL |

---

### ุงูุทุฑููุฉ 2: ูู `Program.cs` ูุจุงุดุฑุฉ

```csharp
// ุงูุทุฑููุฉ ุงูุญุงููุฉ (ุชููุงุฆูุฉ):
builder.Services.AddSearchEngine(builder.Configuration);

// ุฃู ุงุณุชุฎุฏุงู PostgreSQL ูุจุงุดุฑุฉ:
builder.Services.AddPostgresSearchServices(builder.Configuration);

// ุฃู ุงุณุชุฎุฏุงู Redis ูุจุงุดุฑุฉ:
builder.Services.AddRedisServices(builder.Configuration);
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุณูุฑูุฑ ูุดุชุฑู (Shared Hosting) - ุจุฏูู Redis

**appsettings.json:**
```json
{
  "SearchEngine": {
    "Provider": "Postgres"
  }
}
```

**ุงููุชูุฌุฉ:**
```
โ ุชู ุชูุนูู ูุญุฑู ุงูุจุญุซ: PostgreSQL (PostgresUnitSearchEngine)
```

---

### ูุซุงู 2: ุณูุฑูุฑ ุฎุงุต (VPS/Dedicated) - ูุน Redis

**appsettings.json:**
```json
{
  "ConnectionStrings": {
    "Redis": "localhost:6379"
  },
  "SearchEngine": {
    "Provider": "Redis",
    "AutoFallback": true
  }
}
```

**ุงููุชูุฌุฉ:**
```
โ ุชู ุชูุนูู ูุญุฑู ุงูุจุญุซ: Redis (UltraOptimizedSearchEngine)
```

---

### ูุซุงู 3: ุชุจุฏูู ุชููุงุฆู ุฐูู

**appsettings.json:**
```json
{
  "SearchEngine": {
    "Provider": "Auto",
    "AutoFallback": true
  }
}
```

**ุงูุณููุงุฑูููุงุช:**

| ุงูุญุงูุฉ | ุงููุชูุฌุฉ |
|--------|---------|
| Redis ูุชุงุญ ููุนูู | โ ุงุณุชุฎุฏุงู Redis |
| Redis ุบูุฑ ูุชููุฑ | โ ุงุณุชุฎุฏุงู PostgreSQL |
| Redis ูุดู ุงูุงุชุตุงู | โ๏ธ ุงูุชุจุฏูู ุฅูู PostgreSQL |

---

## ๐ ุงูุชุจุฏูู ุจูู ุงููุญุฑูุงุช

### ุฃุซูุงุก ุงูุชุทููุฑ:

1. **ุงูุชุญ** `appsettings.json` ุฃู `appsettings.Development.json`
2. **ุบููุฑ** ูููุฉ `SearchEngine:Provider`
3. **ุฃุนุฏ ุชุดุบูู** ุงูุชุทุจูู

```json
// ููุชุทููุฑ ุงูุณุฑูุน (ุจุฏูู Redis):
"SearchEngine": {
  "Provider": "Postgres"
}

// ููุงุฎุชุจุงุฑ ูุน Redis:
"SearchEngine": {
  "Provider": "Redis"
}
```

---

### ูู ุงูุฅูุชุงุฌ (Production):

**appsettings.Production.json:**
```json
{
  "SearchEngine": {
    "Provider": "Auto",      // ุงุฎุชูุงุฑ ุชููุงุฆู
    "AutoFallback": true     // ุชุจุฏูู ุขูู
  }
}
```

**ุงูููุงุฆุฏ:**
- โ ูุณุชุฎุฏู Redis ุฅู ูุงู ูุชุงุญุงู (ุฃุฏุงุก ุฃุนูู)
- โ ูุชุจุฏู ุฅูู PostgreSQL ุฅุฐุง ูุดู Redis (ุงุณุชูุฑุงุฑูุฉ ุงูุฎุฏูุฉ)
- โ ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ูุดุฑ ุงูููุฏ ุนูุฏ ุชุบููุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ

---

## ๐ ูุตุงุฆุญ ุงูุฃุฏุงุก

### ูุชู ุชุณุชุฎุฏู PostgreSQL:
- โ ุณูุฑูุฑุงุช ูุดุชุฑูุฉ (Shared Hosting)
- โ ููุงุนุฏ ุจูุงูุงุช ุตุบูุฑุฉ/ูุชูุณุทุฉ (<100,000 ูุญุฏุฉ)
- โ ููุฒุงููุฉ ูุญุฏูุฏุฉ
- โ ุจุณุงุทุฉ ุงูุชุดุบูู ูุงูุตูุงูุฉ

### ูุชู ุชุณุชุฎุฏู Redis:
- โ ุณูุฑูุฑุงุช ุฎุงุตุฉ (VPS/Dedicated)
- โ ููุงุนุฏ ุจูุงูุงุช ูุจูุฑุฉ (>100,000 ูุญุฏุฉ)
- โ ุญุฑูุฉ ูุฑูุฑ ุนุงููุฉ ุฌุฏุงู
- โ ุฃูุตู ุฃุฏุงุก ูุทููุจ

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "Redis connection string is not configured"

**ุงูุญู:**
```json
{
  "ConnectionStrings": {
    "Redis": "localhost:6379"  // ุฃุถู ุณูุณูุฉ ุงุชุตุงู Redis
  }
}
```
**ุฃู** ุบููุฑ ุงููุญุฑู:
```json
{
  "SearchEngine": {
    "Provider": "Postgres"  // ุงุณุชุฎุฏู PostgreSQL ุจุฏูุงู
  }
}
```

---

### ูุดููุฉ: "Failed to connect to Redis"

**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุชุดุบูู Redis Server:
   ```bash
   redis-cli ping  # ูุฌุจ ุฃู ูุฑุฌุน PONG
   ```

2. ูุนูู ุงูุชุจุฏูู ุงูุชููุงุฆู:
   ```json
   {
     "SearchEngine": {
       "AutoFallback": true
     }
   }
   ```

---

## ๐ ููุงุฑูุฉ ุงูุฃุฏุงุก

| ุงููุนูุงุฑ | PostgreSQL | Redis |
|---------|-----------|-------|
| **ุณุฑุนุฉ ุงูุจุญุซ** | ุณุฑูุน ุฌุฏุงู (50-200ms) | ูุงุฆู ุงูุณุฑุนุฉ (5-20ms) |
| **ุงุณุชููุงู ุงูุฐุงูุฑุฉ** | ููุฎูุถ | ูุชูุณุท-ุนุงูู |
| **ุงูุชุนููุฏ** | ุจุณูุท | ูุชูุณุท |
| **ุงูุชูููุฉ ุงูุดูุฑูุฉ** | $0 (ูุฏูุฌ) | $5-50 |
| **ุงูุตูุงูุฉ** | ุชููุงุฆูุฉ | ูุฏููุฉ |
| **ุงูููุงุฑุณ** | 14 ููุน | 10 ุฃููุงุน |

---

## โ ุงูุชุญูู ูู ุงููุญุฑู ุงููุดุท

ุนูุฏ ุจุฏุก ุงูุชุทุจููุ ุณุชุธูุฑ ุฑุณุงูุฉ ูู Console:

```
โ ุชู ุชูุนูู ูุญุฑู ุงูุจุญุซ: PostgreSQL (PostgresUnitSearchEngine)
```
ุฃู:
```
โ ุชู ุชูุนูู ูุญุฑู ุงูุจุญุซ: Redis (UltraOptimizedSearchEngine)
```

---

## ๐ฏ ุงูุชูุตูุฉ

**ููุจุฏุงูุฉ ูุงูุชุทููุฑ:**
```json
{
  "SearchEngine": {
    "Provider": "Postgres"
  }
}
```

**ููุฅูุชุงุฌ (ุงูุฃูุซู):**
```json
{
  "SearchEngine": {
    "Provider": "Auto",
    "AutoFallback": true
  }
}
```

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู ููู `appsettings.json`
2. ุชุญูู ูู Console output ุนูุฏ ุจุฏุก ุงูุชุทุจูู
3. ุชุฃูุฏ ูู ุชุดุบูู Redis (ุฅุฐุง ุงุฎุชุฑุช Redis)
4. ุฌุฑูุจ `"Provider": "Postgres"` ูุญู ุจุฏูู
